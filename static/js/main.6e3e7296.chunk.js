(this["webpackJsonpjs-band-final-task"]=this["webpackJsonpjs-band-final-task"]||[]).push([[0],{28:function(e,t,a){e.exports=a(39)},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),l=a(11),s=a(9),u=a(4),i=Object(u.b)((function(e){return{user:e.books.user}}),(function(e){return{signOutUser:function(){return e({type:"SIGNUOT"})}}}))((function(e){var t=e.user,a=e.signOutUser,n=t.username,c=t.avatar;return r.a.createElement("div",null,r.a.createElement(l.b,{to:"/cart"},r.a.createElement("img",{height:"40",src:"./images/cart.svg",alt:"cart"})),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-primary m-2"},"Sing-Out"),r.a.createElement("img",{height:"40",className:"m-2 rounded-circle",src:c,alt:"avatar"}),r.a.createElement("span",null,n))})),m=Object(u.b)((function(e){return{user:e.books.user}}))((function(e){var t=e.user;return r.a.createElement("nav",{className:"navbar navbar-dark"},r.a.createElement("h3",null,"JS BAND STORE / Serhii Babii"),t.username?r.a.createElement(i,null):null)})),E=function(){return r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{className:"text-center",height:"80",src:"./images/cart.svg",alt:"empty cart"}),r.a.createElement("p",null,"Cart empty."))},p=function(e){var t=e.currentCart,a=t.name,n=t.count,c=t.totalPriceBook;return r.a.createElement("tr",{className:"row"},r.a.createElement("td",{className:"col-1"},a),r.a.createElement("td",{className:"col-10"},n),r.a.createElement("td",{className:"col-1"},c))};p.defaultProps={currentCart:{},name:"",count:"",totalPriceBook:void 0};var d=p,b=function(e){var t=e.cart,a=0;return t&&t.forEach((function(e){a+=+e.totalPriceBook})),r.a.createElement("div",null,r.a.createElement("b",null,"Total price, $",a))};b.defaultProps={cart:void 0};var v=b,f=function(e){var t=e.cart;return r.a.createElement("div",null,r.a.createElement("table",{className:"table m-3"},r.a.createElement("tbody",null,t?t.map((function(e){return r.a.createElement(d,{key:e.id,currentCart:e})})):null)),r.a.createElement(v,{cart:t||null}))};f.defaultProps={cart:void 0};var k=f,g=function(e){var t=e.cart;return r.a.createElement("div",null,t?r.a.createElement(k,null):r.a.createElement(E,null))};g.defaultProps={cart:void 0};var O=g,h=a(13),N=function(e){var t=e.price,a=e.maxBooks,c=Object(n.useState)(1),o=Object(h.a)(c,2),l=o[0],s=o[1];return r.a.createElement("div",{className:"border p-2"},r.a.createElement("p",{className:"row"},r.a.createElement("span",{className:"col-8"},"Price, $"),r.a.createElement("span",{className:"col-2"},t)),r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"col-8"},"Count"),r.a.createElement("input",{className:"col-3 rounded pl-2 pr-0",value:l,type:"number",name:"countInput",onChange:function(e){return e.target.value<0?1:e.target.value>a?e.target.value:s(e.target.value)}})),r.a.createElement("p",{className:"row"},r.a.createElement("span",{className:"col-8"},"Total price "),r.a.createElement("span",{className:"col-2"},(t*l).toFixed(2))),r.a.createElement("div",{className:"text-right"},r.a.createElement("button",{disabled:l<1,className:"btn btn-secondary",type:"button"},"Add to cart")))},S=(a(38),function(){return r.a.createElement("div",{className:"lds-css ng-scope"},r.a.createElement("div",{className:"lds-wedges"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)))))}),y=a(25),j=a(26),B="https://js-band-api.glitch.me",_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){fetch(e,t).then((function(e){if(e.status<400)return e.json();throw e})).then((function(e){a(e)})).catch((function(e){e.json().then((function(e){n(e)}))}))}))},C=function(){function e(){Object(y.a)(this,e)}return Object(j.a)(e,null,[{key:"get",value:function(e,t){return _("".concat(B).concat(e),{mode:"cors",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(t)}})}},{key:"post",value:function(e,t){return _("".concat(B).concat(e),{method:"POST",mode:"cors",headers:{"Content-type":"application/json",Accept:"application/json"},body:JSON.stringify(t)})}}]),e}(),F=Object(u.b)((function(e){return{book:e.books.book,loading:e.books.loading,token:e.books.user.token}}),(function(e){return{fetchBookRequest:function(){return e({type:"FETCH_BOOK_REQUEST"})},fetchBookSuccess:function(t){return e(function(e){return{type:"FETCH_BOOK_SUCCESS",book:e}}(t))},fetchBookFailure:function(t){return e(function(e){return{type:"FETCH_BOOK_FAILURE",error:e}}(t))}}}))((function(e){var t=e.match,a=e.token,c=e.loading,o=e.book,l=e.book,s=l.title,u=l.author,i=l.description,m=l.cover,E=l.tags,p=l.level,d=l.count,b=l.price,v=e.fetchBookSuccess,f=e.fetchBookRequest;e.fetchBookFailure;Object(n.useEffect)((function(){C.get("/books/".concat(t.params.id),a).then((function(e){f(),setTimeout((function(){return v(e)}),2e3)}))}),[f,v,t.params.id,a]);var k=m||"./images/imageNotFound.png";return o.title&&!c?r.a.createElement("div",{className:"m-3"},r.a.createElement("div",{className:"row"},r.a.createElement("img",{className:"col-4",src:k,alt:"poster"}),r.a.createElement("div",{className:"col-4"},r.a.createElement("p",null,"Book name:"," ",s),r.a.createElement("p",null,"Book author:"," ",u),r.a.createElement("p",null,"Book level:"," ",p),r.a.createElement("p",null,"Book tags:"," ",E)),r.a.createElement("div",{className:"col-4"},r.a.createElement(N,{price:b,maxBooks:d}))),r.a.createElement("p",null,"Description:",i)):r.a.createElement(S,null)})),T=Object(u.b)(null,(function(e){return{signInUser:function(t,a,n){return e(function(e,t,a){return{type:"SIGNIN",username:e,avatar:t,token:a}}(t,a,n))}}}))((function(e){var t=e.signInUser,a=Object(n.useState)(""),c=Object(h.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(""),u=Object(h.a)(s,2),i=u[0],m=u[1];return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("div",null,r.a.createElement("img",{className:"border",height:"250",src:"images/defaultAvatar.png",alt:"avatar"})),r.a.createElement("div",{className:"m-2"},r.a.createElement("label",{htmlFor:"username"},r.a.createElement("p",{className:"mb-0"},r.a.createElement("b",null,"Username")),r.a.createElement("input",{value:o,onChange:function(e){l(e.target.value),e.target.value.length<4||e.target.value.length>16?m("error"):m("")},className:"col-12",type:"text",name:"username",id:"username",placeholder:"type Username"})),i?r.a.createElement("p",{className:"text-danger"},"Field is not valid"):null),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e=o,a=t,void C.post("/signin",{username:e}).then((function(e){var t=e.username,n=e.avatar,r=e.token;a(t,n,r)}));var e,a},disabled:!!i,className:"col-2",type:"button"},"Sign-In"))))})),w=function(){return r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{className:"col-8",src:"./images/error404.jpg",alt:"error404"}))},U=function(e){var t=e.book,a=t.id,n=t.cover,c=t.title,o=t.author,s=t.price,u=n||"images/imageNotFound.png";return r.a.createElement("div",{className:"cart row col-3 border m-4 p-3"},r.a.createElement("img",{className:"col-12",src:u,alt:"cover"}),r.a.createElement("p",{className:"col-12"},c),r.a.createElement("p",{className:"col-12"},o),r.a.createElement("p",{className:"row col-12"},r.a.createElement("span",{className:"col-8"},"Price:"," ",s),r.a.createElement(l.b,{to:"/books/".concat(a),className:"btn btn-secondary col-4"},"View")))},P=function(){return r.a.createElement("div",{className:"form-group row"},r.a.createElement("input",{className:"form-control col-6",type:"text",name:"search",placeholder:"Search by book name"}),r.a.createElement("select",{className:"form-control col-3",name:"price"},r.a.createElement("option",{value:"all"},"all"),r.a.createElement("option",{value:"from_0_to_15"},"0 < price > 15"),r.a.createElement("option",{value:"from_15_to_30"},"15 < price > 30"),r.a.createElement("option",{value:"more_than_30"},"price > 30")))},I=Object(u.b)((function(e){return{books:e.books.books,token:e.books.user.token,loading:e.books.loading}}),(function(e){return{fetchBooksRequest:function(){return e({type:"FETCHS_BOOK_REQUEST"})},fetchBooksSuccess:function(t){return e(function(e){return{type:"FETCH_BOOKS_SUCCESS",books:e}}(t))},fetchBooksFailure:function(t){return e(function(e){return{type:"FETCH_BOOKS_FAILURE",error:e}}(t))}}}))((function(e){var t=e.books,a=e.token,c=e.loading,o=e.fetchBooksRequest,l=e.fetchBooksSuccess;e.fetchBooksFailure;Object(n.useEffect)((function(){C.get("/books",a).then((function(e){o(),setTimeout((function(){return l(e)}),2e3)}))}),[o,l,a]);var s=c?r.a.createElement(S,null):null,u=t&&!c?t.map((function(e){return r.a.createElement(U,{key:e.id,book:e})})):null;return r.a.createElement("div",{className:"row p-3"},r.a.createElement("div",{className:"col-10"},r.a.createElement(P,null)),r.a.createElement("div",{className:"row"},s,u))})),x=a(10),K=a(27),R=a(20);function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(Object(a),!0).forEach((function(t){Object(R.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D={user:{username:void 0,avatar:void 0,token:void 0},books:[],book:{},filters:{search:"",price:"all"},cart:void 0,loading:!1,error:null},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNIN":return A({},e,{user:{username:t.username,avatar:t.avatar,token:t.token}});case"SIGNUOT":return A({},e,{user:{username:void 0,avatar:void 0,token:void 0}});case"SHOW_FILTERED_BOOKS":return A({},e,{filters:A({},e.filters,Object(R.a)({},t.name,t.value))});case"FETCHS_BOOK_REQUEST":return A({},e,{books:[],loading:!0,error:null});case"FETCH_BOOKS_SUCCESS":return A({},e,{books:t.books,loading:!1,error:null});case"FETCH_BOOKS_FAILURE":return A({},e,{books:[],loading:!1,error:t.error});case"FETCH_BOOK_REQUEST":return A({},e,{book:{},loading:!0,error:null});case"FETCH_BOOK_SUCCESS":return A({},e,{book:t.book,loading:!1,error:null});case"FETCH_BOOK_FAILURE":return A({},e,{book:{},loading:!1,error:t.error});case"ADD_BOOK":return A({},e,{cart:[].concat(Object(K.a)(e.cart),[{book:t.book,quantity:t.quantity}])});case"SEND_BOOKS":return A({},e,{cart:void 0});default:return e}},L=Object(x.b)({books:q}),G=Object(x.c)(L),J=function(){return r.a.createElement(u.a,{store:G},r.a.createElement(l.a,null,r.a.createElement("div",{className:"container"},r.a.createElement("hr",null),r.a.createElement(m,null),r.a.createElement("hr",null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(s.a,{to:"/signin"})),r.a.createElement(s.b,{path:"/signin",component:T}),r.a.createElement(s.b,{exact:!0,path:"/books",component:I}),r.a.createElement(s.b,{path:"/books/:id",component:F}),r.a.createElement(s.b,{path:"/cart",component:O}),r.a.createElement(s.b,{exact:!0,path:"*",component:w})))))};o.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.6e3e7296.chunk.js.map