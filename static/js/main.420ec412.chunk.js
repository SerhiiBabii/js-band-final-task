(this["webpackJsonpjs-band-final-task"]=this["webpackJsonpjs-band-final-task"]||[]).push([[0],{31:function(e,t,a){e.exports=a(41)},41:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(14),l=a.n(c),o=a(11),s=a(9),i=a(8),u=Object(i.b)((function(e){return{user:e.books.user}}),(function(e){return{signOutUser:function(){return e({type:"SIGNUOT"})}}}))((function(e){var t=e.user,a=e.signOutUser,r=t.username,c=t.avatar;return n.a.createElement("div",null,n.a.createElement(o.b,{to:"/cart"},n.a.createElement("img",{height:"40",src:"./images/cart.svg",alt:"cart"})),n.a.createElement("button",{onClick:a,type:"button",className:"btn btn-primary m-2"},"Sing-Out"),n.a.createElement("img",{height:"40",className:"m-2 rounded-circle",src:c,alt:"avatar"}),n.a.createElement("span",null,r))})),m=Object(i.b)((function(e){return{user:e.books.user}}))((function(e){var t=e.user;return n.a.createElement("nav",{className:"navbar navbar-dark"},n.a.createElement("h3",null,"JS BAND STORE / Serhii Babii"),t.username?n.a.createElement(u,null):null)})),E=function(){return n.a.createElement("div",{className:"text-center"},n.a.createElement("img",{className:"text-center",height:"80",src:"./images/cart.svg",alt:"empty cart"}),n.a.createElement("p",null,"Cart empty."))},p=function(e){var t=e.currentCart,a=t.name,r=t.count,c=t.totalPriceBook;return n.a.createElement("tr",{className:"row"},n.a.createElement("td",{className:"col-1"},a),n.a.createElement("td",{className:"col-10"},r),n.a.createElement("td",{className:"col-1"},c))};p.defaultProps={currentCart:{},name:"",count:"",totalPriceBook:void 0};var v=p,d=function(e){var t=e.cart,a=0;return t&&t.forEach((function(e){a+=+e.totalPriceBook})),n.a.createElement("div",null,n.a.createElement("b",null,"Total price, $",a))};d.defaultProps={cart:void 0};var b=d,f=function(e){var t=e.cart;return n.a.createElement("div",null,n.a.createElement("table",{className:"table m-3"},n.a.createElement("tbody",null,t?t.map((function(e){return n.a.createElement(v,{key:e.id,currentCart:e})})):null)),n.a.createElement(b,{cart:t||null}))};f.defaultProps={cart:void 0};var g=f,h=function(e){var t=e.cart;return n.a.createElement("div",null,t?n.a.createElement(g,null):n.a.createElement(E,null))};h.defaultProps={cart:void 0};var O=h,N=a(16),k=a(17),j=a(29),y=a(27),S=a(30),_=a(13),w=function(e){var t=e.level,a=Object(r.useState)(1),c=Object(_.a)(a,2),l=c[0],o=c[1],s=t||3;return n.a.createElement("div",{className:"border"},n.a.createElement("p",{className:"row"},n.a.createElement("span",{className:"col-8"},"Price, $"),n.a.createElement("span",{className:"col-2"},s)),n.a.createElement("div",{className:"row"},n.a.createElement("span",{className:"col-8"},"Count"),n.a.createElement("input",{className:"col-2 rounded",value:l,type:"number",name:"",onChange:function(e){return e.target.value<0?1:e.target.value>6?e.target.value:o(e.target.value)}})),n.a.createElement("p",{className:"row"},n.a.createElement("span",{className:"col-8"},"Total price "),n.a.createElement("span",{className:"col-2"},s*l)),n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{className:"btn btn-secondary",type:"button"},"Add to cart")))};w.defaultProps={level:void 0};var C=w,P=function(e){function t(){var e;return Object(N.a)(this,t),(e=Object(j.a)(this,Object(y.a)(t).call(this))).state={movie:[]},e}return Object(S.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.state.movie,t=e.title,a=e.author,r=e.level,c=e.description,l=e.cover,o=e.tags,s=l||"./images/imageNotFound.png";return n.a.createElement("div",{className:"m-3"},n.a.createElement("div",{className:"row"},n.a.createElement("img",{className:"col-4",src:s,alt:"poster"}),n.a.createElement("div",{className:"col-4"},n.a.createElement("p",null,"Book name:"," ",t),n.a.createElement("p",null,"Book author:"," ",a),n.a.createElement("p",null,"Book level:"," ",r),n.a.createElement("p",null,"Book tags:"," ",o)),n.a.createElement("div",{className:"col-4"},n.a.createElement(C,null))),n.a.createElement("p",null,"Description:",c))}}]),t}(r.Component),B="https://js-band-api.glitch.me",T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,r){fetch(e,t).then((function(e){if(e.status<400)return e.json();throw e})).then((function(e){a(e)})).catch((function(e){e.json().then((function(e){r(e)}))}))}))},U=function(){function e(){Object(N.a)(this,e)}return Object(k.a)(e,null,[{key:"get",value:function(e,t){return T("".concat(B).concat(e),{mode:"cors",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(t)}})}},{key:"post",value:function(e,t){return T("".concat(B).concat(e),{method:"POST",mode:"cors",headers:{"Content-type":"application/json",Accept:"application/json"},body:JSON.stringify(t)})}}]),e}(),F=Object(i.b)(null,(function(e){return{signInUser:function(t,a,r){return e(function(e,t,a){return{type:"SIGNIN",username:e,avatar:t,token:a}}(t,a,r))}}}))((function(e){var t=e.signInUser,a=Object(r.useState)(""),c=Object(_.a)(a,2),l=c[0],o=c[1],s=Object(r.useState)(""),i=Object(_.a)(s,2),u=i[0],m=i[1];return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12 text-center"},n.a.createElement("div",null,n.a.createElement("img",{className:"border",height:"250",src:"images/defaultAvatar.png",alt:"avatar"})),n.a.createElement("div",{className:"m-2"},n.a.createElement("label",{htmlFor:"username"},n.a.createElement("p",{className:"mb-0"},n.a.createElement("b",null,"Username")),n.a.createElement("input",{value:l,onChange:function(e){o(e.target.value),e.target.value.length<4||e.target.value.length>16?m("error"):m("")},className:"col-12",type:"text",name:"username",id:"username",placeholder:"type Username"})),u?n.a.createElement("p",{className:"text-danger"},"Field is not valid"):null),n.a.createElement("div",null,n.a.createElement("button",{onClick:function(){return e=l,a=t,void U.post("/signin",{username:e}).then((function(e){var t=e.username,r=e.avatar,n=e.token;a(t,r,n)}));var e,a},disabled:!!u,className:"col-2",type:"button"},"Sign-In"))))})),I=function(){return n.a.createElement("div",{className:"text-center"},n.a.createElement("img",{className:"col-8",src:"./images/error404.jpg",alt:"error404"}))},x=function(e){var t=e.book,a=t.id,r=t.cover,c=t.title,l=t.author,s=t.price,i=r||"images/imageNotFound.png";return n.a.createElement("div",{className:"cart row col-3 border m-4 p-3"},n.a.createElement("img",{className:"col-12",src:i,alt:"cover"}),n.a.createElement("p",{className:"col-12"},c),n.a.createElement("p",{className:"col-12"},l),n.a.createElement("p",{className:"row col-12"},n.a.createElement("span",{className:"col-8"},"Price:"," ",s),n.a.createElement(o.b,{to:"/book/".concat(a),className:"btn btn-secondary col-4"},"View")))};x.defaultProps={book:void 0};var A=x,D=function(){return n.a.createElement("div",{className:"form-group row"},n.a.createElement("input",{className:"form-control col-6",type:"text",name:"search",placeholder:"Search by book name"}),n.a.createElement("select",{className:"form-control col-3",name:"price"},n.a.createElement("option",{value:"all"},"all"),n.a.createElement("option",{value:"from_0_to_15"},"0 < price > 15"),n.a.createElement("option",{value:"from_15_to_30"},"15 < price > 30"),n.a.createElement("option",{value:"more_than_30"},"price > 30")))},K=function(){return n.a.createElement("div",{className:"row p-3"},n.a.createElement("div",{className:"col-10"},n.a.createElement(D,null)),n.a.createElement("div",{className:"row"},[{id:1,cover:"",title:"Title 1",author:"Author 1",price:32},{id:2,cover:"",title:"Title 2",author:"Author 2",price:18},{id:3,cover:"",title:"Title 3",author:"Author 3",price:12}].map((function(e){return n.a.createElement(A,{key:e.id,book:e})}))))},H=a(10),R=a(28),G=a(22);function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){Object(G.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q={user:{username:void 0,avatar:void 0,token:void 0},books:[],book:{},filters:{search:"",price:"all"},cart:void 0,loading:!1,error:null},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNIN":return L({},e,{user:{username:t.username,avatar:t.avatar,token:t.token}});case"SIGNUOT":return L({},e,{user:{username:void 0,avatar:void 0,token:void 0}});case"SHOW_FILTERED_BOOKS":return L({},e,{filters:L({},e.filters,Object(G.a)({},t.name,t.value))});case"FETCHS_BOOK_REQUEST":return L({},e,{books:[],loading:!0,error:null});case"FETCH_BOOKS_SUCCESS":return L({},e,{books:t.books,loading:!1,error:null});case"FETCH_BOOKS_FAILURE":return L({},e,{books:[],loading:!1,error:t.error});case"FETCH_BOOK_REQUEST":return L({},e,{book:{},loading:!0,error:null});case"FETCH_BOOK_SUCCESS":return L({},e,{book:t.book,loading:!1,error:null});case"FETCH_BOOK_FAILURE":return L({},e,{book:{},loading:!1,error:t.error});case"ADD_BOOK":return L({},e,{cart:[].concat(Object(R.a)(e.cart),[{book:t.book,quantity:t.quantity}])});case"SEND_BOOKS":return L({},e,{cart:void 0});default:return e}},$=Object(H.b)({books:Q}),z=Object(H.c)($),V=function(){return n.a.createElement(i.a,{store:z},n.a.createElement(o.a,null,n.a.createElement("div",{className:"container"},n.a.createElement("hr",null),n.a.createElement(m,null),n.a.createElement("hr",null),n.a.createElement(s.d,null,n.a.createElement(s.b,{exact:!0,path:"/"},n.a.createElement(s.a,{to:"/signin"})),n.a.createElement(s.b,{path:"/signin",component:F}),n.a.createElement(s.b,{exact:!0,path:"/books",component:K}),n.a.createElement(s.b,{path:"/books/:id",component:P}),n.a.createElement(s.b,{path:"/cart",component:O}),n.a.createElement(s.b,{exact:!0,path:"*",component:I})))))};l.a.render(n.a.createElement(V,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.420ec412.chunk.js.map